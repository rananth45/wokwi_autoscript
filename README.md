# Wokwi CLI - Universal Toolkit

ï¿½ **Command Line Interface cho Wokwi Simulator vá»›i Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng**

## ğŸŒŸ TÃ­nh nÄƒng chÃ­nh

### ğŸ”§ Firmware Scanner
âœ… **Tá»± Ä‘á»™ng scan firmware files** (.bin vÃ  .elf)  
âœ… **Há»— trá»£ Ä‘a platform:**
- ğŸ“± **STM32** (STM32CubeIDE projects) - tÃ¬m trong thÆ° má»¥c `Debug/`
- ğŸ”¥ **ESP32** (PlatformIO projects) - tÃ¬m trong thÆ° má»¥c `.pio/build/`

âœ… **Smart detection:**
- Tá»± Ä‘á»™ng phÃ¡t hiá»‡n loáº¡i project
- NhÃ³m files theo cáº·p .bin/.elf
- Chá»n firmware má»›i nháº¥t náº¿u cÃ³ nhiá»u options

### ğŸ“¦ Diagram Manager
âœ… **Wokwi Diagram Downloader**
- Download diagram.json tá»« Wokwi projects
- Tá»± Ä‘á»™ng extract tá»« ZIP files
- Quáº£n lÃ½ project configurations

### ğŸ¯ Command Line Interface
âœ… **Unified CLI vá»›i nhiá»u commands:**
- `wokwi -setup` - Firmware scanning vÃ  setup
- `wokwi -diagram` - Diagram downloading
- `w -setup` - Shorthand commands
- Cross-platform support (Windows/Linux/macOS)

## ğŸš€ CÃ¡ch sá»­ dá»¥ng

### ğŸ¯ CLI Commands (KhuyÃªn dÃ¹ng)
```cmd
# Windows
wokwi.cmd -setup          # Scan vÃ  setup firmware
wokwi.cmd -diagram        # Download diagram tá»« Wokwi  
wokwi.cmd -help          # Hiá»ƒn thá»‹ help
wokwi.cmd -version       # ThÃ´ng tin phiÃªn báº£n

# Shorthand
w.cmd -setup             # Lá»‡nh ngáº¯n gá»n
w.cmd -diagram

# Linux/macOS
./wokwi.sh -setup        # Bash script cho Unix
./wokwi.sh -diagram
```

### ï¿½ï¸ GUI Methods (Legacy)
```cmd
# Double-click batch files
scan_firmware.cmd        # Chá»‰ firmware scanning

# Direct Python execution
python setup.py          # Firmware scanner
python diagram.py        # Diagram downloader
```

### ğŸ“‹ Available Commands
```cmd
Setup Commands:
  -setup, -scan, -config  # Firmware scanning vÃ  configuration
  
Diagram Commands:  
  -diagram                 # Download diagram.json tá»« Wokwi

Info Commands:
  -help, -h               # Hiá»ƒn thá»‹ hÆ°á»›ng dáº«n
  -version, -v            # ThÃ´ng tin phiÃªn báº£n
```

## Cáº¥u trÃºc project Ä‘Æ°á»£c há»— trá»£

### STM32CubeIDE Project
```
MySTM32Project/
â”œâ”€â”€ MyProject.ioc          # â† Tá»± Ä‘á»™ng phÃ¡t hiá»‡n STM32
â”œâ”€â”€ Core/
â”œâ”€â”€ Debug/
â”‚   â”œâ”€â”€ MyProject.bin     # â† Tá»± Ä‘á»™ng tÃ¬m
â”‚   â””â”€â”€ MyProject.elf     # â† Tá»± Ä‘á»™ng tÃ¬m
â””â”€â”€ Wokwi_ESP32/
    â”œâ”€â”€ setup.py
    â””â”€â”€ wokwi.toml        # â† ÄÆ°á»£c táº¡o tá»± Ä‘á»™ng
```

### PlatformIO Project  
```
MyESP32Project/
â”œâ”€â”€ platformio.ini         # â† Tá»± Ä‘á»™ng phÃ¡t hiá»‡n ESP32/PlatformIO
â”œâ”€â”€ src/
â”œâ”€â”€ .pio/build/esp32dev/
â”‚   â”œâ”€â”€ firmware.bin      # â† Tá»± Ä‘á»™ng tÃ¬m
â”‚   â””â”€â”€ firmware.elf      # â† Tá»± Ä‘á»™ng tÃ¬m
â””â”€â”€ wokwi.toml           # â† ÄÆ°á»£c táº¡o tá»± Ä‘á»™ng
```

## Output - wokwi.toml

Script táº¡o file `wokwi.toml` vá»›i format:

```toml
# Wokwi Configuration
# Generated by Universal Firmware Scanner  
# Firmware: MyProject.bin (4,672 bytes)
# ELF: MyProject.elf (653,520 bytes)
# Build time: Wed Sep 17 15:22:15 2025

[wokwi]
version = 1
firmware = '../Debug/MyProject.bin'
elf = '../Debug/MyProject.elf'
```

## TÃ­nh nÄƒng nÃ¢ng cao

### Multiple Firmware Detection
Náº¿u tÃ¬m tháº¥y nhiá»u firmware groups, script sáº½ hiá»ƒn thá»‹ menu:

```
ğŸ” TÃ¬m tháº¥y 2 firmware groups:
1. project1 (E:\Project\Debug\)
   ğŸ“ BIN: project1.bin  
   ğŸ“ ELF: project1.elf

2. project2 (E:\Project\Release\)
   ğŸ“ BIN: project2.bin
   ğŸ“ ELF: project2.elf

Chá»n firmware group (1-2) hoáº·c Enter Ä‘á»ƒ chá»n má»›i nháº¥t: 
```

### Smart Path Resolution
- Tá»± Ä‘á»™ng táº¡o Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i chÃ­nh xÃ¡c
- Normalize paths cho Windows (`\` thay vÃ¬ `/`)
- TÃ¬m project root Ä‘á»ƒ táº¡o paths tá»‘i Æ°u

## Requirements

- âœ… Python 3.6+
- âœ… KhÃ´ng cáº§n thÆ° viá»‡n external (chá»‰ dÃ¹ng built-in modules)

## Troubleshooting

### âŒ "KhÃ´ng tÃ¬m tháº¥y file .bin hoáº·c .elf"
**Giáº£i phÃ¡p:**
- **STM32:** Build project trong STM32CubeIDE trÆ°á»›c
- **ESP32:** Cháº¡y `pio run` trong PlatformIO

### âŒ "KhÃ´ng tÃ¬m tháº¥y cáº·p .bin/.elf Ä‘áº§y Ä‘á»§"  
**Giáº£i phÃ¡p:**
- Äáº£m báº£o cáº£ 2 files .bin vÃ  .elf cÃ³ cÃ¹ng tÃªn
- Kiá»ƒm tra quyá»n truy cáº­p thÆ° má»¥c

### âŒ Python khÃ´ng Ä‘Æ°á»£c tÃ¬m tháº¥y
**Giáº£i phÃ¡p:**
- CÃ i Ä‘áº·t Python tá»« [python.org](https://python.org)
- ThÃªm Python vÃ o PATH trong quÃ¡ trÃ¬nh cÃ i Ä‘áº·t

## Changelog

### v2.0 - Universal Scanner
- â• Há»— trá»£ tá»± Ä‘á»™ng scan thay vÃ¬ hardcode paths
- â• Há»— trá»£ cáº£ STM32 vÃ  ESP32
- â• Smart project detection
- â• Multiple firmware groups support  
- â• Enhanced UI vá»›i colors vÃ  icons
- â• Detailed file information (size, build time)

### v1.0 - PlatformIO Only
- âœ… Chá»‰ há»— trá»£ PlatformIO projects
- âœ… Basic wokwi.toml generation

---

**Made with â¤ï¸ for Wokwi Simulator**